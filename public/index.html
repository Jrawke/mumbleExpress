<!DOCTYPE html>
<html ng-app="mumbleExpressApp">
  <head>
    <title>mumbleExpress</title>
    <script src="socket.io/socket.io.js"></script>
    <script src="angular/angular.min.js"></script>
    <script src="angularjs-scroll-glue/src/scrollglue.js"></script>
    <script src="angular-route/angular-route.js"></script>
    <script src="angular-socket-io/socket.min.js"></script>
    <script src="angular-notification/angular-notification.js"></script>
    <script src="angular-ui-tree/dist/angular-ui-tree.js"></script>
    
    <script src="main.js"></script>
    <link rel="stylesheet" href="style.css"/>
    <link rel="stylesheet" href="angular-ui-tree/dist/angular-ui-tree.min.css">
  </head>
  <body>

    <div id="page-container">
      <div id="header">
	  <img src="icons/config_network.png" height="30" width="30" class="mainIcon">
	  <img src="icons/Information_icon.svg" height="30" width="30" class="mainIcon">
	  <img src="icons/muted_self.svg" height="30" width="30" class="mainIcon">
	  <img src="icons/deafened_self.svg" height="30" width="30" class="mainIcon">
	  <img src="icons/comment.svg" height="30" width="30" class="mainIcon">
	  <img src="icons/config_basic.png" height="30" width="30" class="mainIcon">
      </div>
      <div ng-controller="mumbleExpressController">
	<div id="users">
	  
	  <script type="text/ng-template" id="nodes_renderer.html">
	    <!-- selected node -->
	    <div ui-tree-handle ng-click="selectNode(node)" ng-mouseover="tempSelectNode(node)" ng-mouseleave="tempUnSelectNode()" ng-if="selectedNode(node)" id="selected">
	      <img ng-if="!node.isChannel" src="icons/talking_off.svg" height="20" width="20">
	      {{node.name}}
	      <img ng-if="node.muted" src="icons/muted_self.svg" height="20" width="20">
	      <img ng-if="node.deafened" src="icons/deafened_self.svg" height="20" width="20">
	    </div>

	    <!-- else, unselected node -->
	    <div ui-tree-handle ng-click="selectNode(node)" ng-mouseover="tempSelectNode(node)" ng-mouseleave="tempUnSelectNode()" ng-if="!selectedNode(node)">
	      <img ng-if="!node.isChannel" src="icons/talking_off.svg" height="20" width="20">
	      {{node.name}}
	      <img ng-if="node.muted" src="icons/muted_self.svg" height="20" width="20">
	      <img ng-if="node.deafened" src="icons/deafened_self.svg" height="20" width="20">
	    </div>
	    
	    <ol ui-tree-nodes="" ng-model="node.children">
	      <li ng-repeat="node in node.children" ui-tree-node ng-include="'nodes_renderer.html'">
	      </li>
	    </ol>
	  </script>
	  <div ng-if="channelTree.length" ui-tree="treeOptions" data-drag-delay="100">
	    <ol ui-tree-nodes="" ng-model="channelTree" id="tree-root">
	      <li ng-repeat="node in channelTree" ui-tree-node ng-include="'nodes_renderer.html'"></li>
	    </ol>
	  </div>
	  
	</div>
	<div id="messages" scroll-glue>
	  <p ng-repeat="msg in msgs track by $index">
	    <span class="messageTime">[ {{msg.time}} ] </span>
	    <span class="messageUserName">{{msg.userName}}</span>
	    <span class="messageText">: {{msg.message}}</span>
	  </p>
	</div>
	<div id="chatInput">
	  <form ng-submit="sendMsg()">
	    <input type="text" ng-model="msg.text"/>
	  </form>
	</div>
      </div>
    </div>
    
  </body>
</html>
